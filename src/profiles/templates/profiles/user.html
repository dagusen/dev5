{% extends "base.html" %}

{% block head_title %}{{ user.username }} | {{ block.super }}{% endblock head_title %}

{% block content %}
<h1>{{ user.username }}</h1>

<form class='form' method='GET' action='.'>
	<input type='text' placeholder='Search..' name='q' value='{{ request.GET.q }}'>
	<button class='btn btn-default' type='submit'>Search</button>
</form>

<hr/>
{% if locations %}
{% for loc in locations %}
	<div class="row">
	<div class="col-sm-12"">
		<div class="thumbnail">
		<h4>{{ loc.title }}{% if request.user.is_superuser %} <small>{{ loc.user.username }}</small>{% endif %}</h4>
		<small><a href='{{ request.path }}?q={{ loc.location }}'>{{ loc.location }}</a> | <a href='{{ request.path }}?q={{ loc.category }}'>{{ loc.category }}</a></small>
		<ul>
			{% for item in loc.item_set.all %}
				<li style="margin-bottom: 15px">
					<b><a href='{{ request.path }}?q={{ item.item_name }}'>{{ item.item_name }}</a></b><br/>

					{% if item.item_picture.url %}
						<p><img src="{{ item.MEDIA_URL }}{{ item.item_picture.url }}" width="300px"></p>
					{% endif %}
					{% for ing in item.get_item %}
						<span class="badge badge-default"><a href='{{ request.path }}?q={{ ing }}'>{{ ing }}</a></span>
					{% endfor %}
				</li>
				<p>{% if item.claimed %}Claimed by {{ item.claimer }}{% else %}Unclaimed{% endif %}</p>
				{% if not item.claimed %}
				<a href="{{ item.get_absolute_url }}">Claim Item</a>
				{% endif %}
			{% endfor %}
		</ul>
		</div>
	</div>
	</div>	
{% endfor %}

{% else %}
	<p class='lead'>No Items Found</p>
{% endif %}

{% endblock %}